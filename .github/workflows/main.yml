# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push events
  #push:
    #branches: 
    #- main 
    #- preview 

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:

  Update-DBR-Core-On-Main-Change:
    if: ${{ github.ref == 'refs/heads/DBR-v9' }}
    uses: ./.github/workflows/called-workflow-build-sync-production.yml
    with:
      doc-repo: barcode-reader-docs
      doc-url: barcode-reader/docs/v9/core
      doc-branch: v9
    secrets: inherit

  Update-DBR-Server-On-Main-Change:
    if: ${{ github.ref == 'refs/heads/DBR-v9' }}
    uses: ./.github/workflows/called-workflow-build-sync-production.yml
    with:
      doc-repo: barcode-reader-docs-server
      doc-url: barcode-reader/docs/v9/server
      doc-branch: v9
    secrets: inherit

  Update-DBR-Mobile-On-Main-Change:
    if: ${{ github.ref == 'refs/heads/DBR-v9' }}
    uses: ./.github/workflows/called-workflow-build-sync-production.yml
    with:
      doc-repo: barcode-reader-docs-mobile
      doc-url: barcode-reader/docs/v9/mobile
      doc-branch: v9
    secrets: inherit

  Update-DBR-Js-On-Main-Change:
    if: ${{ github.ref == 'refs/heads/DBR-v9' }}
    uses: ./.github/workflows/called-workflow-build-sync-production.yml
    with:
      doc-repo: barcode-reader-docs-js
      doc-url: barcode-reader/docs/v9/web
      doc-branch: v9
    secrets: inherit
